---
import { getCollection } from 'astro:content';

export async function getSubfolders() {
  const entries = await getCollection("accesorios"); // Reemplaza "blog" con el nombre de tu colección

  // Extraer subcarpetas únicas de los slugs
  const subfolders = new Set();
  entries.forEach(entry => {
    const parts = entry.slug.split("/"); // Divide el slug por "/"
    if (parts.length > 1) {
      subfolders.add(parts[0]); // Agrega el nombre de la subcarpeta al conjunto
    }
  });

  return Array.from(subfolders); // Convierte el conjunto en un array
}

// Uso
const subfolders = await getSubfolders();
console.log(subfolders); // Imprime una lista de subcarpetas únicas

 const links=[
 {
    name: "Inicio",
    link: "/",
    submenu: null
 },
 {
    name: "Equipos",
    link: "/",
    submenu:[
      {name: "Drones", link:"#"},
      {name: "Cámaras Multiespectrales", link:"#"},
      {name: "GNSS Y GPS", link:"#"},
      {name: "Estación Total", link:"#"},
      {name: "Nivel de Topografía", link:"#"}
    ]
 },
 {
    name: "Accesorios",
    link: "/",
    submenu:[
      {name: "Distanciometros Láser", link:"#"},
      {name: "Trípodes", link:"#"},
      {name: "Bastones y Bípodes", link:"#"},
      {name: "Prismas - Miniprismas", link:"#"},
      {name: "Miras Telestópicas", link:"#"},
      {name: "Bases Nivelantes", link:"#"},
      {name: "Baterías y Cargadores", link:"#"},
      {name: "Otros", link:"#"},
    ]
 },
 {
    name: "Consultorias",
    link: "/",
    submenu:[
      {name: "Distanciometros Láser", link:"#"},
      {name: "Geodésia", link:"#"},
      {name: "Topografía", link:"#"},
      {name: "Batimetría", link:"#"},
      {name: "Fotogametría", link:"#"},
      {name: "Diseño de Vías", link:"#"},
      {name: "Cartografía", link:"#"},
      {name: "Catastro", link:"#"},
      {name: "Transporte", link:"#"},
      {name: "Transferencia de Conocimientos", link:"#"}
    ]
 },
 {
    name: "Servicio Técnico",
    link: "/",
    submenu: null
 },
 {
    name: "Holding de empresas",
    link: "/holding",
    submenu: null
 },
 {
    name: "Contacto",
    link: "/",
    submenu: null
 },
 {
   name: "Videoteca",
   link: "/",
   submenu: null
 }
 ]

 const icons=[
   "/icons/fb-w.png",
   "/icons/ig-w.png",
   "/icons/wpp-w.png"
 ]
---

<header>
   <section class="desktop__subnav">
      <div class="subnav__container">
         <div class="subnav__icons flex--row--nowrap">
            {icons.map((i,index)=>{
               return <a href="/">
                  <img src={i} alt="" class="subnav__icon">
               </a>
            })}
         </div>
      </div>
   </section>   
    <nav class="desktop__links">
      <picture class="desktop__image">
         <img src="/images/logo1.png" alt="dkart-logo" class="desktop__image">
      </picture>
      <ul class="desktop__list flex--row--nowrap">
         {links.map((item, index) => (
            <li class="desktop__li">
              <a href={item.link} class={item.submenu !== null ? `desktop__a a--flex` : `desktop__a`}>
               {item.name}
               {item.submenu !== null && (
                  <img src="/icons/arrow-down.png" alt="icon-arrow-down" class="desktop__icon">
               )}
              </a>
              {item.submenu !== null && (
                <ul class="desktop__submenu">
                  {item.submenu.map((subItem, subIndex) => (
                    <li class="submenu-item">
                      <a href={subItem.link}>{subItem.name}</a>
                    </li>
                  ))}
                </ul>
              )}
            </li>
          ))}
      </ul>
    </nav>
</header>

<style >
   header{
      width: 100%;
   }
   .desktop__links{
      width: 100%;
      height: max-content;
      gap: 0px;
      justify-content: space-between;
      padding: 10px 20px;
      display: grid;
      grid-template-columns: 20% 80%;
      grid-template-rows: 100%;
      align-items: center;
      justify-items: center;
      max-width: 1450px;
      margin: 0 auto;
   }
   .desktop__subnav{
      background-color: #222;
      width: 100%;
      height: 40px;
   }
   .subnav__container{
      background-color: ;
      width: 100%;
      max-width: 1320px;
      margin: 0 auto;
      height: 100%;
      display: grid;
      align-items: center;
   }
   .subnav__icons{
      background-color: ;
      width: max-content;
      gap: 17px;
      align-items: center;
      justify-content: center;
      justify-self: flex-end;
   }
   .subnav__icon{
      width: 20px;
      height: 75%;
   }
   .subnav__icon:hover{
      opacity: 0.9;
   }
   .desktop__image{
      width: 240px;
      height: 100px;
      object-fit: contain;
      justify-self: end;
   }
   .desktop__list{
      height: 40px;
   }
   .desktop__li{
      padding: 0 0px;
   }
   .desktop__a{
      padding: 10px 15px;
      font-weight: bold;
      display: flex;
      flex-flow: row nowrap;
      align-items: center;
      justify-content: center;
   }
   .desktop__icon{
      width: 15px;
      height: 10px;
   }
   .desktop__submenu{
      display: none;
   }
   .desktop__li:hover .desktop__submenu{
      display: none;
   }
   .desktop__a:hover{
      border-bottom: 2px solid #672434;
   }
  
   .a--flex{
      display: flex;
      flex-flow: row nowrap;
      justify-content: center;
      align-items: center;
      gap: 10px;
   }
</style>